> Fastcampus의 AWS / Docker 클라우드 서버 구축 강의 [(링크)](https://www.fastcampus.co.kr/dev_online_devops/) 를 공부한 내용입니다.

Serverless
===

서버리스란?
--
- 서버가 없다는 뜻이 아니라, 논리적으로는 서버가 없지만 물리적인 서버는 존재.
- 즉, 보이지않는 어딘가에는 물리적인 서버가 존재하고 '서버의 존재'에 대해서 신경쓰지 않아도 되는 개념을 뜻한다.

클라우드 컴퓨팅의 역사
--
- 예를 들어 화장품회사가 고객이 증가함에 따라 트래픽 증가로 인한 대처를 하여야 하는데, 이렇게 되면서 본래 업무가 주가 되는것이 아닌 서버확장과 증설과 같은 본래 업무와 다른 업무에 리소스를 소모하게 된다. 다른 업무라 함은, 전문인력과 하드웨어의 구입, 하드웨어를 보관하는 전문시설등을 뜻한다. 

Data Center
--
- 이에 대응하기 위하여 서버를 전문 관리하는 data center를 설치하여 일반적인 회사가 내진설계, 냉각장치, 보안 등을 관리하기에는 어렵기에 IDC(Internet Data Center)라는 개념을 도입함.  
  
![image](https://t1.daumcdn.net/cfile/tistory/99CD88395A9F521C1A)
> 그림: IaaS, PaaS, SaaS의 개념도

IaaS(Infrastructure as a Service)
--
- 개념
    - 서버를 운영하기 위해서는 서버 자원, IP, Network, Storage, 전력 등등 인프라를 구축하기 위하여 여러가지가 필요한데, IaaS는 이러한 것들을 가상의 환경에서 쉽고 편하게 이용할 수 있게 서비스형태로 제공한다.
    
- 특징
    - 클라이언트는 서비스 제공업체의 클라우드 환경에 구축하고 싶은 OS와 응용프로그램을 설정하여 사용.

- 대표적인 IaaS 서비스
    - Amazon EC2, RDS
    - Google, MS, IBM, Oracle에서 IaaS 서비스 제공
    - KT, LG U+ 에서 IaaS 서비스 제공

PaaS(Platform as a Service)
--
- 개념
    - 서비스를 개발할 수 있는 안정적인 환경(Platform)과 그 환경을 이용하는 응용 프로그램을 개발할 수 있는 API까지 제공하는 형태를 뜻한다.
- 특징
    - 클라이언트는 어플리케이션, 시스템 구축에 드는 비용을 절감 할 수 있다.
    - 클라이언트는 플랫폼 제공 업체의 기술력을 바탕으로 원하는 시스템을 개발 할 수 있다.
- 대표적인 PaaS 서비스
    - Google Google Cloud Platform, Firebase
    - Naver Naver Cloud Platform

FaaS(Function as a Service)
--
- 개념
    - FaaS는 프로젝트를 여러개의 함수로 쪼개서 (혹은 한 개의 함수로 만들어서), 매우 거대하고 분산된 컴퓨팅 자원에 사용자가 준비해둔 함수를 등록하고, 이 함수들이 실행되는 횟수 (그리고 실행된 시간) 만큼 비용을 내는 방식을 말한다. 

- 특징 
    - 서버 시스템에 대해 신경쓰지 않아도 된다는 점이 PaaS와 유사하지만, PaaS는 전체 애플리케이션을 배포하며, 일단 어떠한 서버에서 사용자의 애플리케이션이 24시간동안 계속해서 돌아간다는 점이다.
    - 반면에 FaaS는 애플리케이션이 아닌 함수를 배포하여 계속 실행되고 있는 것이 아닌, 특정한 이벤트가 발생 했을 때, 실행되며 실행이 되었다가 작업을 마치면 (혹은 최대 타임아웃 시간을 지나면) 종료된다. 

- 장점
    - 1. __비용__ : 필요할 때만 함수가 호출되어 처리되며 함수가 호출된 만큼만 비용이 드므로, 비용이 많이 절감된다.
    - 2. __인프라 관리__ : 네트워크, 장비에 대한 구성 작업을 신경 쓸 필요가 없다.
    - 3. __인프라 보안__ : 리눅스 업데이트, 취약점 보안패치 등을 신경 쓸 필요가 없다.
    - 4. __확장성__ : FaaS는 확장성 면에서 매우 뛰어나다. FaaS를 사용하지 않는다면, 다양한 트래픽에 유연한 대응을 하기 위하여 AWS의 Auto Scaling 같은 기술을 사용하는데, 이를 통하여 CPU 사용량, 네트워크 처리량에 따라 서버의 갯수를 늘리는 방식으로 처리를 분산한다. FaaS를 사용하게 되면 이렇게 특정 조건에 따라 자동으로 확장되는 것이 아니라 그냥, 확장된다. 호출된 만큼 비용을 지불하는 방식.

- 단점
    - 1. __제한__ : 모든 코드를 함수로 쪼개어 작업하다보니, 함수예서 사용할 수 있는 자원에 제한이 있다. AWS에서는 최대 1500MB의 메모리까지 사용 가능하며, 처리시간은 최대 300초까지 사용 가능하다. 때문에 웹 소켓처럼 지속적으로 켜놓는 것은 하지 못한다. 대신, AWS IoT, Pusher 등의 서비스를 이용하면 가능하긴 하다.
    - 2. __제공사에 대한 강한 의존__ : AWS, Azure, Google 등의 FaaS 제공사에 대한 강한 의존을 하게 된다. 가능성은 희박하지만 제공사가 망할 경우 답이 없어진다.
    - 3. __로컬 데이터 사용 불가능__ : 함수들은 무 상태적(stateless)이다. 때문에, 데이터를 로컬 스토리지에서 읽고 쓸 수 없다. 대신에, AWS 라면 S3, Azure 라면  Storage를 이용할 수 있다.
    

Monolithic
--

![image](https://t1.daumcdn.net/cfile/tistory/991F51505B640F321F)
> 그림: 모놀리식 개념도

- 개념
    - 모놀리식 아키텍처란, 마이크로 서비스의 각광에 따라 마이크로서비스가 아닌 전통의 아키텍처를 지칭하는 의미로 생긴 단어.
    - 모든 모듈은 서비스 내부의 Product 형태로 종속되어 있으며, 서비스에만 집중할 수 있는 구조로 되어 있다.
    - 따라서, __하나의 서비스 또는 어플리케이션이 하나의 거대한 아키텍처를 가질 때__, Monolithic 하다고 한다.
- 장점
    - 그 자체로 강건하며 내부 요소간의 Dependency를 크게 가질 수 있다. 
    - 단순한 이키텍처 구조와 개발의 용이함
- 단점
    - 규모가 커짐에 따라 복잡도가 심각하게 증가, 시스템 구조 파악이 어려움.
    - 필연적으로 구조적인 Coupling이 강력하게 유지되는 결과를 초래.
    - 복합적인 예뢰를 만들 수 있는 위험성 내포. 

MSA (Micro Service Architecture)
-- 
![image](https://t1.daumcdn.net/thumb/R720x0/?fname=http://t1.daumcdn.net/brunch/service/user/7ovI/image/sRo-cmDqPf5joCsJ0rgXWEHF-aM.png)
> 그림: Uber의 모놀리식 적용 사례

![image](https://t2.daumcdn.net/thumb/R720x0/?fname=http://t1.daumcdn.net/brunch/service/user/7ovI/image/1Mwe4p27xyqGo4Lrzn1aTCgJejM.png)
> 그림: 모놀리식에서 마이크로 서비스로 전환한 Uber의 적용 사례
- 개념 
    - 마이크로 서비스 아키텍처에 대한 정확한 정의는 없다. 하지만 마이크로 서비스란, 작고 독립적으로 배포 가능한 각각의 기능을 수행하는 서비스로 구성된 프레임워크라고 할 수 있다. 
    - 마이크로 서비스는 완전히 독립적으로 배포 가능하고, 다른 기술 스택(개발언어, 데이터베이스 등)이 사용 가능한 단일 사업 영역에 초점을 둔다.

- 장점
    - 배포(deployment)관점
        - 서비스 별 개별 배포 가능 (배포 시, 전체 서비스의 중단이 없음)
        - 요구사항을 신속하게 반영하여 빠르게 배포할 수 있음.
    - 확장(scaling)관점
        - 특정 서비스에 대한 확장성이 용이.
        - 클라우드 사용에 적합한 아키텍처
    - 장애(failure)관점
        - 장애가 전체 서비스로 확장될 가능성이 적음
        - 부분적 장애에 대한 격리가 수월함
    - 신기술의 적용이 유연 등.

- 단점
    - 각 서비스별로 발생하는 장애처리
    - 각 서비스간 통신으로 인한 지연시간.
    - 각 서비스 및 구성 요소간 연동을 위한 설정 증가.
    - 각 데이터베이스간 데이터 트랙킹이 어려움.
    - (다른 언어를 쓸 경우) 코드의 재사용 불가.

서버리스의 개념
--

- 따라서, 서버리스의 개념을 정리하자면 __비지니스 로직에 집중__ 하고, __서버운영으로부터 자유__ 로워지는 클라우드 컴퓨팅 환경이다.

FaaS == Serverless?
--
- FaaS가 Serverless라고 하기에는 어려우며, __FaaS ⊂ Serverless__ 라고 해야 맞다.

 서버리스를 사용기에 적합한 시스템
 --
 - 1. 사용패턴이 일정치 않아서 프로비저닝이 어려운 경우
- 2. 빨리 실행할 수 있는 간단한 기능
- 3. 굉장이 작은 기능일 경우
- 4. 병렬처리가 필요한 배치성 기능
- 5. 주기적으로 도는 스케줄링 작업
- 6. 센서값에 따라 반응하는 IoT
- 7. 트래픽을 예측할 수 없는 이벤트성 API들

 Reference
 --

> 추가적인 개념들: https://velopert.com/3543, https://2dubbing.tistory.com/36  
> 모놀리식과 마이크로 서비스 아키텍처: https://brunch.co.kr/@yesjun/2